/*****************************************************
 Name: Sheepbar
 Version: 1.0
 Author: Szymon Lisowiec
 Github: https://github.com/SzymonLisowiec/Sheepbar
 License: MIT
*****************************************************/
function Sheepbar(a){"use strict";var b={config:{position:"relative",callback_scroll:function(){},callback_mousedown:function(){},callback_mouseup:function(){},callback_mousemove:function(){},callback_resize:function(){}},elements:{},counter:0,init:function(a,c,d){b.counter++,b.elements[b.counter]={e:a,axises:c,scrollbarmousedown:{x:!1,y:!1},scrollbar:{x:!1,y:!1},x:{axis:"x",size:"width",clientSize:"clientWidth",cssAxis:"left",clientAxis:"clientX",scroll:"scrollLeft"},y:{axis:"y",size:"height",clientSize:"clientHeight",cssAxis:"top",clientAxis:"clientY",scroll:"scrollTop"},loadScrollbar:function(b){["x","y"].indexOf(b)!=-1&&(a.scrollbar[b]=document.createElement("div"),a.scrollbar[b].className="sheepbar-scrollbar sheepbar-"+b,a.scrollbar[b].appendChild(document.createElement("div")),a.e.appendChild(a.scrollbar[b]),a.scrollbar[b].style[a[b].size]=a.e[a[b].clientSize]*(a.e[a[b].clientSize]/a.content[a[b].clientSize]*100)/100+"px",a.scrollbar[b].style.position="absolute",a.scrollbar[b].style[a[b].cssAxis]=0,a.scrollbar[b].addEventListener("mousedown",function(c){a.scrollbarmousedown[b]=c[a[b].clientAxis]}))}},a=b.elements[b.counter],a.e.style.position=b.config.position,a.e.style.overflow="hidden",a.scrollbox=document.createElement("div"),a.scrollbox.className="sheepbar-scrollbox",a.scrollbox.style.width=a.e.clientWidth+"px",a.scrollbox.style.height=a.e.clientHeight+"px",a.scrollbox.style.display="block",a.scrollbox.style.position="absolute",a.scrollbox.style.top="0",a.axises.indexOf("x")>-1?a.scrollbox.style.overflowX="scroll":a.scrollbox.style.overflowX="hidden",a.axises.indexOf("y")>-1?a.scrollbox.style.overflowY="scroll":a.scrollbox.style.overflowY="hidden",a.content=document.createElement("div"),a.content.className="sheepbar-content",a.content.style.display="inline-block",a.content.innerHTML=a.e.innerHTML,a.scrollbox.appendChild(a.content),a.e.innerHTML="",a.e.appendChild(a.scrollbox),a.scrollbox.style.width=parseFloat(a.e.clientWidth)+(a.e.clientWidth-a.scrollbox.clientWidth)+"px",a.scrollbox.style.height=parseFloat(a.e.clientHeight)+(a.e.clientHeight-a.scrollbox.clientHeight)+"px",a.scrollbox.stylesheep=window.getComputedStyle(a.scrollbox),d&&(a.content.setAttribute("contenteditable","true"),a.content.addEventListener("keyup",b.resize)),window.addEventListener("mousemove",function(c){var d="x";if(a.scrollbarmousedown.y)d="y";else if(!a.scrollbarmousedown.x)return;c[a[d].clientAxis]>a.scrollbarmousedown[d]?(a.scrollbar[d].style[a[d].cssAxis]=parseFloat(a.scrollbar[d].style[a[d].cssAxis])+(c[a[d].clientAxis]-a.scrollbarmousedown[d])+"px",parseFloat(a.scrollbar[d].style[a[d].cssAxis])>a.e[a[d].clientSize]-parseFloat(a.scrollbar[d].style[a[d].size])&&(a.scrollbar[d].style[a[d].cssAxis]=a.e[a[d].clientSize]-parseFloat(a.scrollbar[d].style[a[d].size])+"px")):c[a[d].clientAxis]<a.scrollbarmousedown[d]&&(a.scrollbar[d].style[a[d].cssAxis]=parseFloat(a.scrollbar[d].style[a[d].cssAxis])-(a.scrollbarmousedown[d]-c[a[d].clientAxis])+"px",parseFloat(a.scrollbar[d].style[a[d].cssAxis])<0&&(a.scrollbar[d].style[a[d].cssAxis]=0)),a.scrollbox[a[d].scroll]=100*parseFloat(a.scrollbar[d].style[a[d].cssAxis])/a.e[a[d].clientSize]*a.content[a[d].clientSize]/100,a.scrollbarmousedown[d]=c[a[d].clientAxis],document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),b.config.callback_mousemove()}),a.axises.forEach(function(b){a.content[a[b].clientSize]>a.e[a[b].clientSize]&&a.loadScrollbar(b)}),window.addEventListener("mouseup",function(c){a.scrollbarmousedown.x=!1,a.scrollbarmousedown.y=!1,b.config.callback_mouseup()}),a.e.addEventListener("change",b.resize),a.scrollbox.addEventListener("scroll",function(c){a.axises.forEach(function(b){a.scrollbar[b].style[a[b].cssAxis]=100*parseFloat(a.scrollbox[a[b].scroll])/a.content[a[b].clientSize]*a.e[a[b].clientSize]/100+"px"}),b.config.callback_scroll()})},resize:function(){for(var a in b.elements)a=b.elements[a],a.scrollbox.style.width=a.e.clientWidth+"px",a.scrollbox.style.height=a.e.clientHeight+"px",a.scrollbox.style.width=parseFloat(a.e.clientWidth)+(a.e.clientWidth-a.scrollbox.clientWidth)+"px",a.scrollbox.style.height=parseFloat(a.e.clientHeight)+(a.e.clientHeight-a.scrollbox.clientHeight)+"px",a.axises.forEach(function(b){a.scrollbar[b].style[a[b].size]=a.e[a[b].clientSize]*(a.e[a[b].clientSize]/a.content[a[b].clientSize]*100)/100+"px",a.scrollbar[b].style[a[b].cssAxis]=100*parseFloat(a.scrollbox[a[b].scroll])/a.content.clientWidth*a.e.clientWidth/100+"px"});b.config.callback_resize()}};for(var c in a)"undefined"!=typeof b.config[c]&&(b.config[c]=a[c]);var d=document.getElementsByClassName("sheepbar");for(var e in d)if(e%1==0){var f=[];"true"===d[e].dataset.x&&(f[0]="x"),"true"===d[e].dataset.y&&(f[1]="y"),b.init(d[e],f,"undefined"!=typeof d[e].dataset.editor)}window.addEventListener("resize",b.resize)}
